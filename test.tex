\input cwebmac
\datethis

\N{1}{1}Intro. This program simply generates data for {\mc GDANCE} to
solve the problem of placing MacMahon's 24 triangles into a regular
hexagon, as discussed in Martin Gardner in Chapter 16 of
{\sl Mathematical Magic Show}. But instead of making the outside edge
a solid color, I'm trying for a solution with $180^\circ$ symmetry
when we map the colors $\.a\leftrightarrow\.d$, $\.b\leftrightarrow\.c$.

And it should tile the plane too.

\Y\B\&{char} \\{piece}[\T{24}][\T{4}]${}\K\{\{\.{'a'},\39\.{'a'},\39\.{'a'},\39%
\T{0}\},\39\{\.{'d'},\39\.{'d'},\39\.{'d'},\39\T{0}\},\39\{\.{'b'},\39\.{'b'},%
\39\.{'b'},\39\T{0}\},\39\{\.{'c'},\39\.{'c'},\39\.{'c'},\39\T{0}\},\39\{%
\.{'a'},\39\.{'a'},\39\.{'d'},\39\T{0}\},\39\{\.{'d'},\39\.{'d'},\39\.{'a'},\39%
\T{0}\},\39\{\.{'a'},\39\.{'a'},\39\.{'b'},\39\T{0}\},\39\{\.{'d'},\39\.{'d'},%
\39\.{'c'},\39\T{0}\},\39\{\.{'a'},\39\.{'a'},\39\.{'c'},\39\T{0}\},\39\{%
\.{'d'},\39\.{'d'},\39\.{'b'},\39\T{0}\},\39\{\.{'b'},\39\.{'b'},\39\.{'a'},\39%
\T{0}\},\39\{\.{'c'},\39\.{'c'},\39\.{'d'},\39\T{0}\},\39\{\.{'b'},\39\.{'b'},%
\39\.{'c'},\39\T{0}\},\39\{\.{'c'},\39\.{'c'},\39\.{'b'},\39\T{0}\},\39\{%
\.{'b'},\39\.{'b'},\39\.{'d'},\39\T{0}\},\39\{\.{'c'},\39\.{'c'},\39\.{'a'},\39%
\T{0}\},\39\{\.{'a'},\39\.{'b'},\39\.{'c'},\39\T{0}\},\39\{\.{'b'},\39\.{'d'},%
\39\.{'c'},\39\T{0}\},\39\{\.{'a'},\39\.{'b'},\39\.{'d'},\39\T{0}\},\39\{%
\.{'a'},\39\.{'d'},\39\.{'c'},\39\T{0}\},\39\{\.{'a'},\39\.{'c'},\39\.{'d'},\39%
\T{0}\},\39\{\.{'a'},\39\.{'d'},\39\.{'b'},\39\T{0}\},\39\{\.{'a'},\39\.{'c'},%
\39\.{'b'},\39\T{0}\},\39\{\.{'b'},\39\.{'c'},\39\.{'d'},\39\T{0}\},\};{}$\6
\&{char} \\{pos}[\T{36}][\T{4}]${}\K\{\{\T{2},\39\T{3},\39\T{8},\39\T{0}\},\39%
\{\T{3},\39\T{0},\39\T{4},\39\T{0}\},\39\{\T{4},\39\T{5},\39\T{9},\39\T{0}\},%
\39\{\T{5},\39\T{1},\39\T{6},\39\T{0}\},\39\{\T{6},\39\T{7},\39\T{10},\39\T{0}%
\},\39\{\T{11},\39\T{12},\39\T{19},\39\T{0}\},\39\{\T{12},\39\T{8},\39\T{13},%
\39\T{0}\},\39\{\T{13},\39\T{14},\39\T{20},\39\T{0}\},\39\{\T{14},\39\T{9},\39%
\T{15},\39\T{0}\},\39\{\T{15},\39\T{16},\39\T{21},\39\T{0}\},\39\{\T{16},\39%
\T{10},\39\T{17},\39\T{0}\},\39\{\T{17},\39\T{18},\39\T{22},\39\T{0}\},\};{}$\6
\&{char} \\{map}[\T{23}]${}\K\{\T{0},\39\T{0},\39\T{11},\39\T{3},\39\T{4},\39%
\T{5},\39\T{6},\39\T{7},\39\T{8},\39\T{9},\39\T{10},\39\T{11},\39\T{12},\39%
\T{13},\39\T{14},\39\T{15},\39\T{16},\39\T{17},\39\T{7},\39\T{19},\39\T{20},\39%
\T{20},\39\T{19}\};{}$\7
\\{main}(\,)\1\1\2\2\6
${}\{{}$\1\6
\&{register} \&{int} \|j${},{}$ \|k;\7
\&{for} ${}(\|k\K\T{12};{}$ ${}\|k<\T{36};{}$ ${}\|k\PP){}$\1\5
${}\\{pos}[\|k][\T{0}]\K\\{pos}[\|k-\T{12}][\T{1}],\39\\{pos}[\|k][\T{1}]\K%
\\{pos}[\|k-\T{12}][\T{2}],\39\\{pos}[\|k][\T{2}]\K\\{pos}[\|k-\T{12}][%
\T{0}];{}$\2\6
\X3:Output the first line of dance data\X;\6
\&{for} ${}(\|j\K\T{0};{}$ ${}\|j<\T{24};{}$ ${}\|j\PP){}$\1\6
\&{for} ${}(\|k\K\T{0};{}$ ${}\|k<(\|j\G\T{4}\?\T{36}:\T{12});{}$ ${}\|k\PP){}$%
\1\5
\X2:Generate rows for piece \PB{\|j} in position \PB{\|k}\X;\2\2\6
\4${}\}{}$\2\par
\fi

\M{2}\B\X2:Generate rows for piece \PB{\|j} in position \PB{\|k}\X${}\E{}$\6
${}\{{}$\1\6
${}\\{printf}(\.{"\%s\ P\%02d"},\39\\{piece}[\|j],\39\|k\MOD\T{12});{}$\6
\&{if} ${}(\\{map}[\\{pos}[\|k][\T{0}]]\E\\{pos}[\|k][\T{0}]){}$\1\5
${}\\{printf}(\.{"\ \%02d:\%c"},\39\\{pos}[\|k][\T{0}],\39\\{piece}[\|j][%
\T{0}]);{}$\2\6
\&{else}\1\5
${}\\{printf}(\.{"\ \%02d:\%c"},\39\\{map}[\\{pos}[\|k][\T{0}]],\39\.{'a'}+%
\.{'d'}-\\{piece}[\|j][\T{0}]);{}$\2\6
\&{if} ${}(\\{map}[\\{pos}[\|k][\T{1}]]\E\\{pos}[\|k][\T{1}]){}$\1\5
${}\\{printf}(\.{"\ \%02d:\%c"},\39\\{pos}[\|k][\T{1}],\39\\{piece}[\|j][%
\T{1}]);{}$\2\6
\&{else}\1\5
${}\\{printf}(\.{"\ \%02d:\%c"},\39\\{map}[\\{pos}[\|k][\T{1}]],\39\.{'a'}+%
\.{'d'}-\\{piece}[\|j][\T{1}]);{}$\2\6
\&{if} ${}(\\{map}[\\{pos}[\|k][\T{2}]]\E\\{pos}[\|k][\T{2}]){}$\1\5
${}\\{printf}(\.{"\ \%02d:\%c"},\39\\{pos}[\|k][\T{2}],\39\\{piece}[\|j][%
\T{2}]);{}$\2\6
\&{else}\1\5
${}\\{printf}(\.{"\ \%02d:\%c"},\39\\{map}[\\{pos}[\|k][\T{2}]],\39\.{'a'}+%
\.{'d'}-\\{piece}[\|j][\T{2}]);{}$\2\6
${}\\{printf}(\.{"\ \%s\\n"},\39\\{piece}[\|j\XOR\T{1}]);{}$\6
\4${}\}{}$\2\par
\U1.\fi

\M{3}\B\X3:Output the first line of dance data\X${}\E{}$\6
\&{for} ${}(\|j\K\T{0};{}$ ${}\|j<\T{24};{}$ ${}\|j\PP){}$\1\5
${}\\{printf}(\.{"\%s\ "},\39\\{piece}[\|j]);{}$\2\6
\&{for} ${}(\|k\K\T{0};{}$ ${}\|k<\T{12};{}$ ${}\|k\PP){}$\1\5
${}\\{printf}(\.{"P\%02d\ "},\39\|k);{}$\2\6
\\{printf}(\.{"|"});\6
\&{for} ${}(\|k\K\T{0};{}$ ${}\|k<\T{21};{}$ ${}\|k\PP){}$\1\6
\&{if} ${}(\|k\I\T{1}\W\|k\I\T{2}\W\|k\I\T{18}){}$\1\5
${}\\{printf}(\.{"\ \%02d"},\39\|k);{}$\2\2\6
\\{printf}(\.{"\\n"});\par
\U1.\fi

\N{1}{4}Index.

\fi


\inx
\fin
\con
